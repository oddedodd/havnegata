---
/**
 * OfferSlider Component
 * 
 * A flexible component for displaying offers/tilbud in a card-based slider layout.
 * Can be used to show all offers or filter by company-specific offers.
 * 
 * @component
 * @description Displays a slider of offer cards with images, titles, prices, descriptions, and links.
 * Each card shows an offer with optional image, pricing, description, and action links.
 * Features mobile-friendly swipe gestures and responsive design.
 * 
 * @example
 * // Basic usage - shows all offers with default styling
 * <OfferSlider />
 * 
 * @example
 * // Company-specific offers with custom text color
 * <OfferSlider 
 *   tilbud={companyTilbud} 
 *   textColor={{ hex: '#333' }} 
 *   companyName="Company Name" 
 * />
 * 
 * @example
 * // Custom title with company offers
 * <OfferSlider 
 *   tilbud={tilbud} 
 *   title="Special Offers" 
 *   textColor={{ hex: '#666' }} 
 * />
 * 
 * USAGE PATTERNS:
 * 
 * 1. GLOBAL OFFERS (index.astro):
 *    - Used without props to display all offers from Sanity
 *    - Automatically fetches all tilbud using getAllTilbud()
 *    - Uses default text color (#222) and generic title "Tilbud"
 * 
 * 2. COMPANY-SPECIFIC OFFERS (CompanySection.astro):
 *    - Receives pre-filtered tilbud for a specific company
 *    - Uses company's textColor for consistent branding
 *    - Displays company name in title: "Tilbud fra [Company Name]"
 *    - Maintains visual consistency with company's color scheme
 * 
 * PROPS:
 * - tilbud?: Tilbud[] - Array of offer objects (optional, fetches all if not provided)
 * - title?: string - Custom title for the section (optional)
 * - textColor?: { hex: string } - Text color for titles (defaults to #222)
 * - companyName?: string - Company name for title generation (optional)
 * 
 * DATA STRUCTURE (Tilbud):
 * - name: string - Offer name/title
 * - price?: string - Price information
 * - description?: string - Offer description
 * - image?: ImageAsset - Offer image with alt text
 * - links?: Array<{title?: string, url?: string}> - Action links
 * - company: Company - Associated company information
 * 
 * SLIDER FEATURES:
 * - Mobile-friendly swipe gestures
 * - Responsive design (1 card on mobile, 2 on tablet, 3 on desktop)
 * - Auto-play with pause on interaction
 * - Navigation arrows and pagination dots
 * - Smooth transitions and animations
 */

import { getAllTilbud, type Tilbud } from "../utils/sanity";
import OfferSliderReact from "./OfferSlider";

interface Props {
  tilbud?: Tilbud[];
  title?: string;
  textColor?: { hex: string };
  companyName?: string;
}

const { tilbud: passedTilbud, title, textColor = { hex: '#222' }, companyName } = Astro.props;

// If no tilbud passed, fetch all tilbud from Sanity
const tilbud = passedTilbud || await getAllTilbud();
---

{tilbud && tilbud.length > 0 && (
  <OfferSliderReact 
    tilbud={tilbud}
    textColor={textColor}
    title={title}
    companyName={companyName}
    client:load
  />
)} 