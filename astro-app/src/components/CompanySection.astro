---
import { urlFor } from "../utils/image";
import PortableTextRenderer from "./PortableTextRenderer";
import OfferSlider from "./OfferSlider";
import { getTilbudByCompany } from "../utils/sanity";
import DisplayLinks from "./DisplayLinks.astro";

const { name, slug, tagline, bgImage, bgColor, textColor, shadowColor, body, links  } = Astro.props;
const tilbud = await getTilbudByCompany(slug);
const bgImageUrl = bgImage ? urlFor(bgImage).width(1200).height(600).url() : null;

const linkUrl = links ? links.url : null;
console.log(links);
// console.log(linkUrl);


---

<div class="relative h-screen w-full h-96 flex items-center justify-center overflow-hidden rounded-lg" style={`background: ${bgImageUrl ? `url('${bgImageUrl}') center/cover no-repeat` : '#f9e6ef'};`}>
  <!-- Overlay for pastel effect -->
  <div class="absolute inset-0 opacity-60" style={`background-color: ${bgColor.hex || '#f9e6ef'};`}></div>
  <!-- Content -->
  <div class="relative z-20 flex flex-col items-center justify-center w-full">
    <span class="text-white text-xl sm:text-2xl font-body font-light mb-2 tracking-wide">
      {name}
    </span>
    <h1 class="text-white text-5xl sm:text-6xl font-headline font-extrabold mb-2 px-4" style={`text-shadow: 2px 3px 0 ${shadowColor.hex || '#d48fcf'};`}>
      {tagline}
    </h1>
  </div>
</div>
<div class="min-h-screen w-full" style={`background-color: ${bgColor.hex || '#f9e6ef'};`}>
  <div class="container mx-auto px-4 py-8 max-w-3xl">
    <PortableTextRenderer value={body} client:load />
  </div>
  <DisplayLinks links={links} />
</div>

<OfferSlider tilbud={tilbud} textColor={textColor} companyName={name} client:load />
